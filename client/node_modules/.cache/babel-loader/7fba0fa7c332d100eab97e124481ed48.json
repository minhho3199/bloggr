{"ast":null,"code":"import { call, put } from \"redux-saga/effects\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { createBrowserHistory } from \"history\";\nconst initialState = {\n  isLoading: false,\n  isLoginSuccess: false,\n  error: undefined\n};\nconst loginSlice = createSlice({\n  name: \"Login\",\n  initialState,\n  reducers: {\n    loginStart(state) {\n      state.isLoading = true;\n    },\n\n    loginSuccess(state) {\n      state.isLoading = false;\n      state.isLoginSuccess = true;\n    },\n\n    loginFailed(state, action) {\n      state.isLoading = false;\n      state.error = action.payload;\n    },\n\n    resetLoginState(state) {\n      state.error = undefined;\n    }\n\n  }\n});\nexport default loginSlice.reducer;\nexport const {\n  loginStart,\n  loginSuccess,\n  loginFailed,\n  resetLoginState\n} = loginSlice.actions;\nexport function* startLogin(action) {\n  console.log(\"StartLogin has been run\");\n\n  try {\n    const {\n      payload\n    } = action;\n    console.log(payload);\n    const {\n      email,\n      password\n    } = payload; // console.log(action.pyaload);\n\n    const response = yield call(axios.post, \"/users/login\", {\n      email,\n      password\n    });\n    yield put(loginSuccess);\n    localStorage.setItem(\"usertoken\", response.data);\n    createBrowserHistory().push(\"/home\");\n  } catch (e) {\n    console.log(e);\n    yield put(loginFailed(e));\n  }\n}","map":{"version":3,"sources":["/Users/minhho3199/Documents/Code/bloggr/client/src/components/LoginForm/loginSlice.js"],"names":["call","put","createSlice","axios","createBrowserHistory","initialState","isLoading","isLoginSuccess","error","undefined","loginSlice","name","reducers","loginStart","state","loginSuccess","loginFailed","action","payload","resetLoginState","reducer","actions","startLogin","console","log","email","password","response","post","localStorage","setItem","data","push","e"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,QAA0B,oBAA1B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,oBAAT,QAAqC,SAArC;AAEA,MAAMC,YAAY,GAAG;AACpBC,EAAAA,SAAS,EAAE,KADS;AAEpBC,EAAAA,cAAc,EAAE,KAFI;AAGpBC,EAAAA,KAAK,EAAEC;AAHa,CAArB;AAMA,MAAMC,UAAU,GAAGR,WAAW,CAAC;AAC9BS,EAAAA,IAAI,EAAE,OADwB;AAE9BN,EAAAA,YAF8B;AAG9BO,EAAAA,QAAQ,EAAE;AACTC,IAAAA,UAAU,CAACC,KAAD,EAAQ;AACjBA,MAAAA,KAAK,CAACR,SAAN,GAAkB,IAAlB;AACA,KAHQ;;AAITS,IAAAA,YAAY,CAACD,KAAD,EAAQ;AACnBA,MAAAA,KAAK,CAACR,SAAN,GAAkB,KAAlB;AACAQ,MAAAA,KAAK,CAACP,cAAN,GAAuB,IAAvB;AACA,KAPQ;;AAQTS,IAAAA,WAAW,CAACF,KAAD,EAAQG,MAAR,EAAgB;AAC1BH,MAAAA,KAAK,CAACR,SAAN,GAAkB,KAAlB;AACAQ,MAAAA,KAAK,CAACN,KAAN,GAAcS,MAAM,CAACC,OAArB;AACA,KAXQ;;AAYTC,IAAAA,eAAe,CAACL,KAAD,EAAQ;AACtBA,MAAAA,KAAK,CAACN,KAAN,GAAcC,SAAd;AACA;;AAdQ;AAHoB,CAAD,CAA9B;AAqBA,eAAeC,UAAU,CAACU,OAA1B;AACA,OAAO,MAAM;AACZP,EAAAA,UADY;AAEZE,EAAAA,YAFY;AAGZC,EAAAA,WAHY;AAIZG,EAAAA;AAJY,IAKTT,UAAU,CAACW,OALR;AAOP,OAAO,UAAUC,UAAV,CAAqBL,MAArB,EAA6B;AACnCM,EAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;;AACA,MAAI;AACH,UAAM;AAACN,MAAAA;AAAD,QAAYD,MAAlB;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYN,OAAZ;AACA,UAAM;AAACO,MAAAA,KAAD;AAAQC,MAAAA;AAAR,QAAoBR,OAA1B,CAHG,CAIH;;AACA,UAAMS,QAAQ,GAAG,MAAM3B,IAAI,CAACG,KAAK,CAACyB,IAAP,EAAa,cAAb,EAA6B;AAACH,MAAAA,KAAD;AAAQC,MAAAA;AAAR,KAA7B,CAA3B;AACA,UAAMzB,GAAG,CAACc,YAAD,CAAT;AACAc,IAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCH,QAAQ,CAACI,IAA3C;AACA3B,IAAAA,oBAAoB,GAAG4B,IAAvB,CAA4B,OAA5B;AACA,GATD,CASE,OAAOC,CAAP,EAAU;AACXV,IAAAA,OAAO,CAACC,GAAR,CAAYS,CAAZ;AACA,UAAMhC,GAAG,CAACe,WAAW,CAACiB,CAAD,CAAZ,CAAT;AACA;AACD","sourcesContent":["import { call, put } from \"redux-saga/effects\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { createBrowserHistory } from \"history\";\n\nconst initialState = {\n\tisLoading: false,\n\tisLoginSuccess: false,\n\terror: undefined,\n}\n\nconst loginSlice = createSlice({\n\tname: \"Login\",\n\tinitialState,\n\treducers: {\n\t\tloginStart(state) {\n\t\t\tstate.isLoading = true\n\t\t},\n\t\tloginSuccess(state) {\n\t\t\tstate.isLoading = false;\n\t\t\tstate.isLoginSuccess = true;\n\t\t},\n\t\tloginFailed(state, action) {\n\t\t\tstate.isLoading = false;\n\t\t\tstate.error = action.payload;\n\t\t},\n\t\tresetLoginState(state) {\n\t\t\tstate.error = undefined;\n\t\t}\n\t}\n});\n\nexport default loginSlice.reducer;\nexport const {\n\tloginStart,\n\tloginSuccess,\n\tloginFailed,\n\tresetLoginState\n} = loginSlice.actions;\n\nexport function* startLogin(action) {\n\tconsole.log(\"StartLogin has been run\");\n\ttry {\n\t\tconst {payload} = action;\n\t\tconsole.log(payload);\n\t\tconst {email, password} = payload;\n\t\t// console.log(action.pyaload);\n\t\tconst response = yield call(axios.post, \"/users/login\", {email, password});\n\t\tyield put(loginSuccess);\n\t\tlocalStorage.setItem(\"usertoken\", response.data);\n\t\tcreateBrowserHistory().push(\"/home\");\n\t} catch (e) {\n\t\tconsole.log(e);\n\t\tyield put(loginFailed(e));\n\t}\n}"]},"metadata":{},"sourceType":"module"}